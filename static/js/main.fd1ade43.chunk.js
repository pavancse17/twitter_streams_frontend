(this.webpackJsonptwitter_streams_frontend=this.webpackJsonptwitter_streams_frontend||[]).push([[0],{101:function(e,t){},104:function(e,t,n){},124:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(10),s=n.n(c),o=n(61),i=n(7),l=n(11),u=n(57),m=n(23),d={topHundreadTweets:[],currentShowingTweets:[],waitingForStream:null},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TRIGGER_TWEETS":return Object(m.a)({},e,{topHundreadTweets:[],currentShowingTweets:[],waitingForStream:!0});case"TWEET_RECIEVED":var n=[t.payload.tweet].concat(e.topHundreadTweets.slice(0,99));return Object(m.a)({},e,{waitingForStream:!1,topHundreadTweets:n,currentShowingTweets:n.slice(0,10)});case"SHOW_MORE_TWEETS":var a=e.topHundreadTweets.slice(0,e.currentShowingTweets.length+10);return Object(m.a)({},e,{currentShowingTweets:a});default:return e}},p=n(8),h=n.n(p),f=n(34),E=n(18),g=n.n(E),v={API_URL:"https://strawberry-pie-84465.herokuapp.com"},T=h.a.mark(S),b=h.a.mark(_),y=h.a.mark(O);function S(e){var t;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=g.a,n.next=3,t.socket.get("".concat(v.API_URL,"/tweets/?q=").concat(e.payload.searchItem),null,(function(e){return console.log(e),e}));case 3:case"end":return n.stop()}}),T)}function _(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.b)("TRIGGER_TWEETS",S);case 2:case"end":return e.stop()}}),b)}function O(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)([_()]);case 2:case"end":return e.stop()}}),y)}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(104),n(105);var k=n(19),x=n(20),j=n(21),N=n(22),I=function(e){Object(N.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(k.a)(this,n),(a=t.call(this,e)).onChangeHandler=function(e){a.setState({searchedItem:e.target.value})},a.onKeyPressHandler=function(e){"Enter"===e.key&&a.props.dispatch({type:"TRIGGER_TWEETS",payload:{searchItem:a.state.searchedItem}})},a.state={searchedItem:""},a}return Object(x.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"py-3"},r.a.createElement("label",{htmlFor:"search",className:"mr-1 text-lg text-white"},"Search"),r.a.createElement("input",{type:"search",value:this.state.searchedItem,className:"rounded-sm text-lg font-medium",onChange:this.onChangeHandler,onKeyPress:this.onKeyPressHandler}))}}]),n}(r.a.Component),H=Object(l.b)((function(e){}))(I),R=n(58),W=n.n(R),C=n(59),F=n.n(C),P=n(60),G=n.n(P);function A(e){var t=e.tweet;return r.a.createElement("div",{className:"bg-gray-200 my-3 hover:bg-indigo-100 rounded-md pd-4"},r.a.createElement("div",{className:"flex h-auto"},r.a.createElement("div",{className:"object-contain mt-1"},r.a.createElement("img",{src:t.user.profile_image_url_https,alt:"Profile",className:"rounded-full mr-6"})),r.a.createElement("div",{className:"flex flex-col ml-1"},r.a.createElement("div",{className:"flex justify-between"},r.a.createElement("div",{className:"flex"},r.a.createElement("p",{className:"mr-2"},t.user.name),r.a.createElement("div",{className:"text-gray-700"},r.a.createElement("a",{href:"https://twitter.com/".concat(t.user.screen_name)},"@",t.user.screen_name),r.a.createElement("span",{className:"mx-1"},"."),r.a.createElement(G.a,{fromNow:!0},t.created_at))),r.a.createElement("a",{className:"text-blue-600 mr-2",href:"https://twitter.com/".concat(t.user.screen_name,"/status/").concat(t.id_str)},"link")),r.a.createElement("div",{className:"mt-3"},t.text))))}var L=function(e){Object(N.a)(n,e);var t=Object(j.a)(n);function n(){return Object(k.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=F()(g.a);t.sails.url=v.API_URL,t.socket.on("connect",(function(){t.socket.on("tweets",(function(t){e.props.dispatch({type:"TWEET_RECIEVED",payload:{tweet:t}})}))})),window.onscroll=function(){window.innerHeight+window.scrollY>=document.body.offsetHeight&&e.props.currentShowingTweets.length>=10&&e.props.currentShowingTweets.length!==e.props.topHundreadTweets.length&&e.props.dispatch({type:"SHOW_MORE_TWEETS"}),0===window.pageYOffset&&t.socket.on("tweets",(function(t){e.props.dispatch({type:"TWEET_RECIEVED",payload:{tweet:t}})})),0!==window.pageYOffset&&(t.socket.off("tweets"),t.socket.removeAllListeners("tweets"))},t.socket.on("disconnect",(function(){t.socket.off("tweets"),t.socket.removeAllListeners("tweets")}))}},{key:"render",value:function(){var e;return e=this.props.waitingForStream?r.a.createElement("p",{className:"m-16 text-center text-lg"},"Waiting for the new tweets..."):this.props.currentShowingTweets.map((function(e){return r.a.createElement(A,{key:e.id,tweet:e})})),r.a.createElement(W.a,{enter:"fadeIn",durationEnter:1e3,component:"div"},e)}}]),n}(r.a.Component);var D=Object(l.b)((function(e){return{currentShowingTweets:e.currentShowingTweets,topHundreadTweets:e.topHundreadTweets,waitingForStream:e.waitingForStream}}))(L);var K=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"text-center bg-blue-600"},r.a.createElement(H,null)),r.a.createElement("div",{className:"mx-auto lg:w-1/2 md:w-2/3"},r.a.createElement(D,null)))},M=Object(o.a)(),U=Object(i.d)(w,Object(i.a)(M,u.logger));M.run(O),s.a.render(r.a.createElement(l.a,{store:U},r.a.createElement(K,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},62:function(e,t,n){e.exports=n(124)}},[[62,1,2]]]);
//# sourceMappingURL=main.fd1ade43.chunk.js.map